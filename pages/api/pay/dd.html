<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>dd</h1>

    <script>
      // tickets
      var total;
      // cart
      const body = [
        {
          _id: "6231d82cb0ef997f3dc068e5",
          title: "Garden Area Ticket (Adults)",
          image: "/images/tickets (3).jpg",
          price: "2500",
          quantity: 11,
          id: "03",
        },
        {
          _id: "6231d850b0ef997f3dc068e06",
          title: "Garden Area Ticket (Kids)",
          image: "/images/tickets (4).jpg",
          price: "1500",
          quantity: 6,
          id: "04",
        },
      ];

      const tickets = [
        {
          id: "01",
          title: "Swimming Ticket (Adults)",
          image: "/images/tickets (2).jpg",
          price: "3500",
          quantity: 1,
        },
        {
          id: "02",
          title: "Swimming Ticket (Kids)",
          image: "/images/tickets (1).jpg",
          price: "1200",
          quantity: 1,
        },
        {
          id: "03",
          title: "Garden Area Ticket (Adults)",
          image: "/images/tickets (3).jpg",
          price: "2500",
          quantity: 1,
        },
        {
          id: "04",
          title: "Garden Area Ticket (Kids)",
          image: "/images/tickets (4).jpg",
          price: "1500",
          quantity: 1,
        },
      ];

      // a place to store cart items after
      const filteredCart = [];
      // strip cartItems of price,title,image

      // tickets.filter((ticket)=>ticket)
      body.map(
        (cartItem) => (
          delete cartItem.price,
          delete cartItem.title,
          delete cartItem.image,
          filteredCart.push(cartItem)
        )
      );
      // filter tickets from DB by items striped from cartitems
      const filteredTicketsFromDb = [];
      filteredCart.map((fc) =>
        filteredTicketsFromDb.push(
          ...tickets.filter((ticket) => ticket.id === fc.id)
        )
      );

      //  change filteredTicketsFromDb quantity to cart items quantity
      for (let i = 0; i < filteredTicketsFromDb.length; ++i) {
        var foundIndex = filteredTicketsFromDb.findIndex(
          (x) => x.id === body[i].id
        );
        filteredTicketsFromDb[foundIndex].quantity = body[foundIndex].quantity;
      }

      //   get total price
      for (let index = 0; index < filteredTicketsFromDb.length; index++) {
        total +=
          filteredTicketsFromDb[index].quantity +
          filteredTicketsFromDb[index].price;
      }

      //   total += filteredTicketsFromDb.reduce(function (
      //     accumulator,
      //     currentValue
      //   ) {
      //     return accumulator + currentValue.price;
      //   },
      //   0);
      console.log(filteredTicketsFromDb);
      //   console.log(filteredCart);
      console.log(total);
    </script>
  </body>
</html>
